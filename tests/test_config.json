{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "description": "Test configuration for struct-frame code generation framework",
  "version": "2.0",
  
  "proto_files": [
    "basic_types.proto",
    "nested_messages.proto",
    "comprehensive_arrays.proto",
    "serialization_test.proto"
  ],
  
  "languages": {
    "c": {
      "name": "C",
      "enabled": true,
      "code_generation": {
        "flag": "--build_c",
        "output_path_flag": "--c_path",
        "output_dir": "tests/generated/c"
      },
      "compilation": {
        "enabled": true,
        "compiler": "gcc",
        "compiler_check": "gcc --version",
        "flags": ["-I{generated_dir}", "-o", "{output}", "{source}", "-lm"],
        "source_extension": ".c",
        "executable_extension": ".exe"
      },
      "test_dir": "tests/c",
      "build_dir": "tests/c/build"
    },
    
    "cpp": {
      "name": "C++",
      "file_prefix": "cpp",
      "enabled": true,
      "code_generation": {
        "flag": "--build_cpp",
        "output_path_flag": "--cpp_path",
        "output_dir": "tests/generated/cpp"
      },
      "compilation": {
        "enabled": true,
        "compiler": "g++",
        "compiler_check": "g++ --version",
        "flags": ["-std=c++14", "-I{generated_dir}", "-o", "{output}", "{source}"],
        "source_extension": ".cpp",
        "executable_extension": ".exe"
      },
      "test_dir": "tests/cpp",
      "build_dir": "tests/cpp/build"
    },
    
    "py": {
      "name": "Python",
      "enabled": true,
      "code_generation": {
        "flag": "--build_py",
        "output_path_flag": "--py_path",
        "output_dir": "tests/generated/py"
      },
      "compilation": {
        "enabled": false
      },
      "execution": {
        "interpreter": "python",
        "source_extension": ".py",
        "env": {
          "PYTHONPATH": "{generated_dir}"
        }
      },
      "test_dir": "tests/py",
      "build_dir": "tests/py/build"
    },
    
    "ts": {
      "name": "TypeScript",
      "enabled": true,
      "code_generation": {
        "flag": "--build_ts",
        "output_path_flag": "--ts_path",
        "output_dir": "tests/generated/ts"
      },
      "compilation": {
        "enabled": true,
        "compiler": "npx tsc",
        "compiler_check": "npx tsc --version",
        "command": "npx tsc --project {generated_dir}/tsconfig.json",
        "output_dir": "tests/generated/ts/js",
        "source_extension": ".ts",
        "compiled_extension": ".js",
        "working_dir": "tests/ts"
      },
      "execution": {
        "interpreter": "node",
        "script_dir": "tests/generated/ts/js"
      },
      "test_dir": "tests/ts",
      "build_dir": "tests/ts/build"
    },
    
    "gql": {
      "name": "GraphQL",
      "enabled": true,
      "code_generation": {
        "flag": "--build_gql",
        "output_path_flag": "--gql_path",
        "output_dir": "tests/generated/gql"
      },
      "compilation": {
        "enabled": false
      },
      "generation_only": true
    }
  },
  
  "test_suites": [
    {
      "name": "basic_types",
      "description": "Tests basic integer, float, and boolean types",
      "test_name": "test_basic_types"
    },
    {
      "name": "arrays",
      "description": "Tests array serialization and deserialization",
      "test_name": "test_arrays"
    },
    {
      "name": "cross_platform_encode",
      "description": "Cross-platform serialization",
      "test_name": "test_cross_platform_serialization",
      "output_file": "{lang_name}_test_data.bin"
    },
    {
      "name": "cross_platform_decode",
      "description": "Cross-platform deserialization",
      "test_name": "test_cross_platform_deserialization",
      "plugin": "cross_platform_matrix",
      "input_from": "cross_platform_encode"
    }
  ]
}
