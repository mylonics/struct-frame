// Test proto file for variable length messages
// This demonstrates the new variable field message feature
package variable_messages;

// A variable length message that only sends the used bytes
// With option variable = true, arrays and variable strings only
// pack the actual used data, not the full max_size
message VariableDataMessage {
  option msgid = 1;
  option variable = true;
  
  uint32 message_id = 1;
  repeated uint8 data = 2 [max_size=200];  // Up to 200 bytes, but only sends what's used
  uint16 checksum = 3;
}

// A fixed length message (traditional behavior)
// Without variable option, the entire max_size is always sent
message FixedDataMessage {
  option msgid = 2;
  
  uint32 message_id = 1;
  repeated uint8 data = 2 [max_size=200];  // Always sends 201 bytes (1 count + 200 data)
  uint16 checksum = 3;
}

// Variable message with multiple arrays
// Shows that multiple variable-length fields work together
message MultiArrayVariable {
  option msgid = 3;
  option variable = true;
  
  uint8 type = 1;
  repeated int32 readings = 2 [max_size=50];   // Up to 200 bytes of int32 data
  repeated float values = 3 [max_size=25];     // Up to 100 bytes of float data  
  string label = 4 [max_size=64];              // Up to 64 chars variable string
}
