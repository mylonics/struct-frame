// Frame Format Profiles for struct-frame
//
// This file defines the standard frame format profiles and allows users to create
// custom profile aliases by combining HeaderType and PayloadType.
//
// STANDARD PROFILES:
// Instead of manually configuring headers and payloads, use these intent-based
// profiles that bundle common features for your use case:
//
// - STANDARD: General purpose serial/UART (BasicDefault)
// - SENSOR: Low-bandwidth sensors (TinyMinimal)
// - IPC: Trusted inter-process communication (NoneMinimal)
// - BULK: Large file transfers (BasicExtended)
// - NETWORK: Multi-node mesh networks (BasicExtendedMultiSystemStream)
//
// CREATING CUSTOM PROFILES:
// To create a custom profile, add a new ProfileAlias message that specifies
// the HeaderType and PayloadType combination you want to use.
//
// CONTRIBUTING NEW HEADERS/PAYLOADS:
// If you need a new header or payload type that doesn't exist, please submit
// a PR to the struct-frame repository at https://github.com/mylonics/struct-frame

package frame_formats;

// ============================================================================
// HEADER TYPE ENUMERATION
// ============================================================================
// HeaderType defines the framing level (start byte pattern)

enum HeaderType {
  // None: No start bytes, relies on external synchronization
  HEADER_NONE = 0;

  // Tiny: 1 start byte [0x70+PayloadType]
  HEADER_TINY = 1;

  // Basic: 2 start bytes [0x90] [0x70+PayloadType]
  HEADER_BASIC = 2;

  // UBX: 2 start bytes [0xB5] [0x62]
  HEADER_UBX = 3;

  // MavlinkV1: 1 start byte [0xFE]
  HEADER_MAVLINK_V1 = 4;

  // MavlinkV2: 1 start byte [0xFD]
  HEADER_MAVLINK_V2 = 5;
}

// ============================================================================
// PAYLOAD TYPE ENUMERATION
// ============================================================================
// PayloadType defines how the payload is structured (header fields + CRC)
// For Basic/Tiny: start byte encodes this as 0x70 + PayloadType value

enum PayloadType {
  // Minimal: [MSG_ID] [PACKET]
  // No length field, no CRC. Requires known message sizes.
  PAYLOAD_MINIMAL = 0;

  // Default: [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // 1-byte length, 2-byte CRC. Standard format.
  PAYLOAD_DEFAULT = 1;

  // ExtendedMsgIds: [LEN] [PKG_ID] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Adds package ID for message namespace separation.
  PAYLOAD_EXTENDED_MSG_IDS = 2;

  // ExtendedLength: [LEN16] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // 2-byte length for payloads up to 65535 bytes.
  PAYLOAD_EXTENDED_LENGTH = 3;

  // Extended: [LEN16] [PKG_ID] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Extended message IDs + 2-byte length.
  PAYLOAD_EXTENDED = 4;

  // SysComp: [SYS_ID] [COMP_ID] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Adds system and component IDs for multi-system networks.
  PAYLOAD_SYS_COMP = 5;

  // Seq: [SEQ] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Adds sequence number for packet loss detection.
  PAYLOAD_SEQ = 6;

  // MultiSystemStream: [SEQ] [SYS_ID] [COMP_ID] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Combines Seq + SysComp for multi-system streaming.
  PAYLOAD_MULTI_SYSTEM_STREAM = 7;

  // ExtendedMultiSystemStream: [SEQ] [SYS_ID] [COMP_ID] [LEN16] [PKG_ID] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Full featured format with all extensions.
  PAYLOAD_EXTENDED_MULTI_SYSTEM_STREAM = 8;

  // Third-party protocol payloads
  PAYLOAD_UBX = 100;
  PAYLOAD_MAVLINK_V1 = 101;
  PAYLOAD_MAVLINK_V2 = 102;
}

// ============================================================================
// STANDARD PROFILES
// ============================================================================
// Pre-defined frame format profiles for common use cases

enum Profile {
  // Standard profile: Basic header + Default payload
  // Use case: General purpose, reliable communication (Serial/UART)
  // Format: [0x90] [0x71] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Overhead: 6 bytes, Max payload: 255 bytes
  PROFILE_STANDARD = 0;

  // Sensor profile: Tiny header + Minimal payload
  // Use case: Low-overhead sensor data, known message sizes (Radio/LoRa)
  // Format: [0x70] [MSG_ID] [PACKET]
  // Overhead: 2 bytes, No length/CRC
  PROFILE_SENSOR = 1;

  // IPC profile: None header + Minimal payload
  // Use case: Trusted inter-process communication (SPI/Shared Memory)
  // Format: [MSG_ID] [PACKET]
  // Overhead: 1 byte, No framing
  PROFILE_IPC = 2;

  // Bulk profile: Basic header + Extended payload
  // Use case: Large data transfers with package namespacing (Firmware/Files)
  // Format: [0x90] [0x74] [LEN_LO] [LEN_HI] [PKG_ID] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Overhead: 8 bytes, Max payload: 64KB
  PROFILE_BULK = 3;

  // Network profile: Basic header + ExtendedMultiSystemStream payload
  // Use case: Multi-system networked communication with full features (Mesh/Swarm)
  // Format: [0x90] [0x78] [SEQ] [SYS_ID] [COMP_ID] [LEN_LO] [LEN_HI] [PKG_ID] [MSG_ID] [PACKET] [CRC1] [CRC2]
  // Overhead: 11 bytes, Max payload: 64KB
  PROFILE_NETWORK = 4;
}

// ============================================================================
// PROFILE ALIAS DEFINITIONS
// ============================================================================
// Define custom profile aliases by combining HeaderType and PayloadType

// Profile alias message - use this to define custom profiles
message ProfileAlias {
  string name = 1;              // Name of the profile (e.g., "MyCustomProfile")
  HeaderType header_type = 2;   // Header type to use
  PayloadType payload_type = 3; // Payload type to use
  string description = 4;       // Optional description
}

// Example custom profile aliases:

// TinyDefault - Tiny header with Default payload
// Use case: Lower overhead than Basic while still having length and CRC
// Format: [0x71] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
// Overhead: 5 bytes
message TinyDefaultAlias {
  ProfileAlias profile = 1 [default = {
    name: "TinyDefault",
    header_type: HEADER_TINY,
    payload_type: PAYLOAD_DEFAULT,
    description: "Tiny header with default payload. Lower overhead alternative to Standard profile."
  }];
}

// BasicSeq - Basic header with Seq payload
// Use case: Need sequence numbers for packet loss detection on serial link
// Format: [0x90] [0x76] [SEQ] [LEN] [MSG_ID] [PACKET] [CRC1] [CRC2]
// Overhead: 7 bytes
message BasicSeqAlias {
  ProfileAlias profile = 1 [default = {
    name: "BasicSeq",
    header_type: HEADER_BASIC,
    payload_type: PAYLOAD_SEQ,
    description: "Basic header with sequence payload. Standard profile with packet loss detection."
  }];
}

// Users can add their own custom profile aliases here following the same pattern
