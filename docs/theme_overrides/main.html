{% extends "base.html" %}

{% block extrahead %}
  {{ super() }}
  
  {% if page %}
    {# Page-specific meta description from frontmatter #}
    {% if page.meta.description %}
      <meta name="description" content="{{ page.meta.description }}">
    {% endif %}
    
    {# Page-specific keywords from frontmatter #}
    {% if page.meta.keywords %}
      <meta name="keywords" content="{{ page.meta.keywords | join(', ') if page.meta.keywords is iterable and page.meta.keywords is not string else page.meta.keywords }}">
    {% endif %}
    
    {# Open Graph meta tags #}
    <meta property="og:title" content="{% if page.meta.title %}{{ page.meta.title }}{% else %}{{ page.title }} - {{ config.site_name }}{% endif %}">
    {% if page.meta.description %}
      <meta property="og:description" content="{{ page.meta.description }}">
    {% else %}
      <meta property="og:description" content="{{ config.site_description }}">
    {% endif %}
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ page.canonical_url }}">
    <meta property="og:site_name" content="{{ config.site_name }}">
    
    {# Twitter Card meta tags #}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@mylonics">
    <meta name="twitter:title" content="{% if page.meta.title %}{{ page.meta.title }}{% else %}{{ page.title }} - {{ config.site_name }}{% endif %}">
    {% if page.meta.description %}
      <meta name="twitter:description" content="{{ page.meta.description }}">
    {% else %}
      <meta name="twitter:description" content="{{ config.site_description }}">
    {% endif %}
    
    {# Canonical URL #}
    <link rel="canonical" href="{{ page.canonical_url }}">
  {% endif %}
  
  {# Structured data for search engines #}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Struct Frame",
    "applicationCategory": "DeveloperApplication",
    "description": "{{ config.site_description }}",
    "operatingSystem": "Windows, macOS, Linux",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Organization",
      "name": "Mylonics",
      "url": "https://mylonics.com"
    },
    "url": "{{ config.site_url }}"
  }
  </script>
{% endblock %}

{% block htmltitle %}
  {% if page %}
    {% if page.meta.title %}
      <title>{{ page.meta.title }}</title>
    {% else %}
      <title>{{ page.title }} - {{ config.site_name }}</title>
    {% endif %}
  {% else %}
    <title>{{ config.site_name }}</title>
  {% endif %}
{% endblock %}
